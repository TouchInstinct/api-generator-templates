{%- import 'utils.twig' as utils -%}

{%- set bodyParamName = utils.decapitalize(bodyType.type.typeName) -%}
{%- set funcName = utils.decapitalize(name) -%}

import LeadKit
import RxSwift
import Alamofire

extension NetworkService {

    /// {{ description }}
    func {{ funcName }}({{ bodyParamName }}: {{ bodyType.type.typeName }},
                   encoding: ParameterEncoding = URLEncoding.default,
                   headers: HTTPHeaders? = nil) -> Single<{{ responseType.type.typeName }}> {

        let parameters = ApiRequestParameters(url: "{{ url }}",
                                              method: .post,
                                              parameters: {{ bodyParamName }}.toJSON(),
                                              encoding: encoding,
                                              headers: headers)

        return rxRequest(with: parameters).map { $0.model }.asSingle()
    }

}
